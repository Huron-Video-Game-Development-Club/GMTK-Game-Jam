<!DOCTYPE html>
<html>
<head>
    <script src="//cdn.jsdelivr.net/npm/phaser@3.55.2/dist/phaser.min.js"></script>
    <img src="/rock.png"/>
</head>
<body>

    <script>
    var width = 800;

    var height = 800;
        
    var config = {
        type: Phaser.AUTO,
        width: width,
        height: height,
        pixelArt: true,
        physics: {
            default: 'arcade',
            arcade: {
                gravity: { y: 0 }
            }
        },
        scale: {
    parent: 'game-container',
    mode: Phaser.Scale.HEIGHT_CONTROLS_WIDTH,
    autoRound: true,
    autoCenter: Phaser.DOM.CENTER_BOTH,
  },
        scene: {
            preload: preload,
            create: create,
            update: update
        }
    };

    var game = new Phaser.Game(config);


    function preload(){
        
        this.load.spritesheet('idle', '/bryangle_idle.png', {frameWidth: 24, frameHeight: 24});
        
        this.load.spritesheet('run', '/bryangle_run.png', {frameWidth: 24, frameHeight: 24}); 

        this.load.image("rock", "/rock.png");

        
    }

    var player;
    var keys;
    var idleAnim;
    var runAnim;
    var platforms;
        
    function create(){
        keys = this.input.keyboard.createCursorKeys();
        idleAnim = this.anims.create({
            key: 'idle',
            frames: this.anims.generateFrameNumbers('idle', {start: 0, end: 3}),
            frameRate: 4,
            repeat: -1
        });

        runAnim = this.anims.create({
            key: 'run',
            frames: this.anims.generateFrameNumbers('run', {start: 0, end: 3}),
            frameRate: 8,
            repeat: -1
        });


        player = this.physics.add.sprite(100, 100, 'run');
        player.setScale(2);
        
        player.setCollideWorldBounds(true);
        platforms = this.physics.add.staticGroup();

        //  Here we create the ground.
        //  Scale it to fit the width of the game (the original sprite is 400x32 in size)
        platforms.create(400, 568, 'rock').refreshBody();

        //  Now let's create some ledges
        platforms.create(600, 400, 'rock');
        platforms.create(50, 250, 'rock');
    
        player.isMoving = {x: false, y: false};
       // player.play("run");
       
       this.physics.add.collider(player, platforms);


    }

    const SPEED = 100;

    function update(){
        if (keys.left.isDown){
            player.setVelocityX(-SPEED);
            player.setFlipX(false);
            player.isMoving.x = true;
        }
        else if (keys.right.isDown){
            player.setVelocityX(SPEED);
            player.setFlipX(true);
            player.isMoving.x = true;
        }
        else{
            player.isMoving.x = false;
            player.setVelocityX(0);
        }

        if (keys.up.isDown){
            player.setVelocityY(-SPEED);
            player.isMoving.y = true;
        }
        else if (keys.down.isDown){
            player.setVelocityY(SPEED);
            player.isMoving.y = true;
        }
        else{
            player.isMoving.y = false;
            player.setVelocityY(0);
        }

        if (!player.isMoving.x && !player.isMoving.y){
            player.play('idle', true);
            player.setVelocityX(0);
            player.setVelocityY(0);
        }
        else{
            player.play("run", true);
        }
       // player.play("run");
       
    }
    </script>

</body>
</html>